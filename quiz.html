<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Sécurité Privée</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="quiz-container">
        <!-- En-tête avec navigation -->
        <header class="quiz-header">
            <a href="index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i> Retour aux quiz
            </a>
            <h1 id="quiz-title"><i class="fas fa-spinner fa-spin"></i> Chargement...</h1>
            <div class="quiz-info">
                <span id="quiz-question-count"><i class="fas fa-question-circle"></i> -- questions</span>
                <span><i class="fas fa-redo"></i> Tentatives illimitées</span>
            </div>
        </header>

        <!-- Barre de progression -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill">0%</div>
            </div>
            <div class="progress-stats">
                <span id="progress-text">Question 0/--</span>
                <span id="score-preview">Score: 0%</span>
            </div>
        </div>

        <!-- Conteneur des questions -->
        <div id="questions-container" class="questions-container">
            <!-- Les questions seront injectées ici par JavaScript -->
        </div>

        <!-- Contrôles -->
        <div class="controls">
            <button id="prev-btn" onclick="prevQuestion()" disabled>
                <i class="fas fa-chevron-left"></i> Précédent
            </button>
            <button id="next-btn" onclick="nextQuestion()">
                Suivant <i class="fas fa-chevron-right"></i>
            </button>
            <button id="finish-btn" onclick="showResults()" style="display: none;">
                <i class="fas fa-flag-checkered"></i> Terminer le quiz
            </button>
        </div>

        <!-- Résultats -->
        <div id="results-container" class="results-container" style="display: none;">
            <!-- Les résultats seront affichés ici -->
        </div>

        <!-- Bouton pour recommencer -->
        <div class="restart-container" style="display: none;" id="restart-container">
            <button onclick="restartQuiz()" class="restart-btn">
                <i class="fas fa-redo"></i> Recommencer le quiz
            </button>
            <a href="index.html" class="other-quiz-btn">
                <i class="fas fa-list"></i> Voir les autres quiz
            </a>
        </div>
    </div>

    <!-- Chargement dynamique des scripts -->
    <script>
        // Get quiz ID from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const quizId = urlParams.get('id') || '1';

        // Load the quiz data file dynamically
        const script = document.createElement('script');
        script.src = `data/quiz${quizId}.js`;
        script.onload = function() {
            // Once data is loaded, load the quiz engine
            const quizScript = document.createElement('script');
            quizScript.src = 'quiz.js';
            document.body.appendChild(quizScript);
        };
        script.onerror = function() {
            document.getElementById('quiz-title').innerHTML = '<i class="fas fa-exclamation-triangle"></i> Quiz non trouvé';
            document.getElementById('questions-container').innerHTML =
                '<div class="question-card"><p>Le quiz demandé n\'existe pas. <a href="index.html">Retour à l\'accueil</a></p></div>';
        };
        document.body.appendChild(script);
    </script>
</body>
</html>
